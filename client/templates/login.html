
<div class="col-sm-9">

  <!-- make a map that centers on current location or santa monica. dependent on ng-map -->
  <ng-map class="map"
          default-style="false"
          center="{{ 'current-location' || '[34.0194,-118.4911]'}}"
          zoom="11"
          styles='[{"elementType":"labels.text","stylers":[{"visibility":"off"}]},{"featureType":"landscape.natural","elementType":"geometry.fill","stylers":[{"color":"#f5f5f2"},{"visibility":"on"}]},{"featureType":"administrative","stylers":[{"visibility":"off"}]},{"featureType":"transit","stylers":[{"visibility":"off"}]},{"featureType":"poi.attraction","stylers":[{"visibility":"off"}]},{"featureType":"landscape.man_made","elementType":"geometry.fill","stylers":[{"color":"#ffffff"},{"visibility":"on"}]},{"featureType":"poi.business","stylers":[{"visibility":"off"}]},{"featureType":"poi.medical","stylers":[{"visibility":"off"}]},{"featureType":"poi.place_of_worship","stylers":[{"visibility":"off"}]},{"featureType":"poi.school","stylers":[{"visibility":"off"}]},{"featureType":"poi.sports_complex","stylers":[{"visibility":"off"}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"color":"#ffffff"},{"visibility":"simplified"}]},{"featureType":"road.arterial","stylers":[{"visibility":"simplified"},{"color":"#ffffff"}]},{"featureType":"road.highway","elementType":"labels.icon","stylers":[{"color":"#ffffff"},{"visibility":"off"}]},{"featureType":"road.highway","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"road.arterial","stylers":[{"color":"#ffffff"}]},{"featureType":"road.local","stylers":[{"color":"#ffffff"}]},{"featureType":"poi.park","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"poi","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"water","stylers":[{"color":"#71c8d4"}]},{"featureType":"landscape","stylers":[{"color":"#e5e8e7"}]},{"featureType":"poi.park","stylers":[{"color":"#8ba129"}]},{"featureType":"road","stylers":[{"color":"#ffffff"}]},{"featureType":"poi.sports_complex","elementType":"geometry","stylers":[{"color":"#c7c7c7"},{"visibility":"off"}]},{"featureType":"water","stylers":[{"color":"#a0d3d3"}]},{"featureType":"poi.park","stylers":[{"color":"#91b65d"}]},{"featureType":"poi.park","stylers":[{"gamma":1.51}]},{"featureType":"road.local","stylers":[{"visibility":"off"}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"visibility":"on"}]},{"featureType":"poi.government","elementType":"geometry","stylers":[{"visibility":"off"}]},{"featureType":"landscape","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"road.arterial","elementType":"geometry","stylers":[{"visibility":"simplified"}]},{"featureType":"road.local","stylers":[{"visibility":"simplified"}]},{"featureType":"road"},{"featureType":"road"},{},{"featureType":"road.highway"}]'
          >

    <!-- a marker with your current location -->
    <!-- <shape id="circle" name="circle" centered="true"
      stroke-color='#42a5f5' stroke-opacity="0.95"stroke-weight="4"
      center="current-position" radius="40"></shape> -->


    <marker animation="Animation.DROP"
            title="you are here"
            id='avatar'
            position="current-location"
            icon="./img/rsz_link-pixel.png" >
    </marker>
    <!-- markers for user events -->
    <marker ng-repeat="p in loginCtrl.eventLocations"
            on-click="loginCtrl.showDetail(event, p)"
            title="{{ p.name }}"
            id='{{p._id}}'
            position="{{ p.location }}"
            icon="./img/rsz_minimap-quest.png" >
    </marker>
    <!-- markers for meetup events -->
    <marker ng-repeat="p in loginCtrl.meetupLocations"
            on-click="loginCtrl.showDetail(event, p)"
            title="{{ p.name }}"
            id='{{ p.id }}'
            position="[{{ p.venue.lat }}, {{ p.venue.lon }}]"
            icon="./img/rsz_meetup-quest.png" >
    </marker>

  </ng-map>

  <!-- For testing drills into meetup data -->
  <!-- <ul>
    <li ng-repeat="p in loginCtrl.meetupLocations">{{ p.event_url }}</li>
  </ul> -->

</div>

<div class="col-sm-3 login-window">

  <div class="quest-details">
    <h2>Quest</h2>
    <h3>Name: </h3>
    <h5>{{loginCtrl.eventDetails.name}} </h5>
    <h3>Location:
    <h5>{{ loginCtrl.eventDetails.address || loginCtrl.eventDetails.venue.address_1}}</h5>
    <h3>Date:</h3>
    <p>{{ loginCtrl.eventDetails.date || loginCtrl.eventDetails.time | date}}</p>
    Show More Details<input type="checkbox" ng-model="details">
    <div ng-show="details" class="">
      <div class="">
        <h3>Details</h3>
        <p>{{ loginCtrl.eventDetails.description || loginCtrl.eventDetails.description}}</p>
      </div>
    </div>
    <!-- Meetup Link if there is one -->
    <a ng-show="loginCtrl.eventDetails.event_url" href="{{ loginCtrl.eventDetails.event_url }}" target="_blank" class="btn btn-danger">Join!</a>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-default" ng-click="loginCtrl.open()">Open me!</button>
  </div>

  <div class="login-window-detail" ng-show="!loginCtrl.currentUser.username">
    <hr>
    <h2>Login</h2>
    <h3>and contribute!</h3>
    <div ng-show="loginCtrl.error" class="alert alert-danger">{{ loginCtrl.errorMessage }}</div>
    <form class="form" ng-submit="loginCtrl.login()">
      <div class="form-group">
        <label>Username</label>
        <input type="text" class="form-control" name="username" ng-model="loginCtrl.loginForm.username" required>
      </div>
      <div class="form-group">
        <label>Password</label>
          <input type="password" class="form-control" name="password" ng-model="loginCtrl.loginForm.password" required>
        </div>
        <div>
          <button type="submit" class="btn btn-default" ng-disabled="loginCtrl.disabled">Login</button>
          <button ui-sref="register" class="btn btn-info">Sign-Up</button>
        </div>
    </form>
  </div>

</div>


<!-- Modal: TODO cannot access user selected event -->
<script type="text/ng-template" id="myModalContent.html">
  <div class="modal-header" ng-init="console.log($resolve)">
      <h3 class="modal-title" id="modal-title">ALEX Details!</h3>
  </div>
  <div class="modal-body" id="modal-body">
      <ul>
          <li ng-repeat="item in loginCtrl.items">
              <a href="#" ng-click="$event.preventDefault(); loginCtrl.selected.item = item">{{ item }}</a>
          </li>
      </ul>
      Selected: <b>{{ loginCtrl.selected.item }}</b>

      <h3>Name: </h3>
      <h4>{{ loginCtrl.banana || "Nothing here..."}} </h4>
  </div>
  <div class="modal-footer">
      <button class="btn btn-primary" type="button" ng-click="">Accept</button>
      <button class="btn btn-warning" type="button" ng-click="">Dismiss</button>
  </div>
</script>
